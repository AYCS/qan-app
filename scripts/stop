#!/usr/bin/env bash
BASEDIR=$(cd "$(dirname "$0")"; pwd)
LISTEN="${LISTEN:-":LISTEN"}"
HOST="${LISTEN%:*}"
PORT="${LISTEN#*:}"

app_is_running() {
   pid=$(ps ax | grep "python -c 'import BaseHTTPServer as bhs, SimpleHTTPServer as shs; bhs.HTTPServer((\"$HOST\", $PORT), shs.SimpleHTTPRequestHandler).serve_forever()'" | grep -v grep | awk '{print $1}')
   [ "$pid" ] && return 0 # running
   return 1 # not running
}

if app_is_running; then
   kill $pid
   echo "Stopped Percona QAN App"
else
   echo "Percona QAN App is not running"
fi
