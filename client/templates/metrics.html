<div class="panel panel-default">
    <div class="panel-heading">
        {{ cnt }} Queries ({{ qps }} QPS,  {{ percentage }}, {{ load }} Load)
    </div>
    <div class="panel-body padding-free">
        <table
         style="margin-bottom: 0px !important;"
         class="table table-bordered table-striped table-hover table-condensed metrics">
            <thead>
                <tr>
                    <th nowrap width="20%">Metrics</th>
                    <th colspan="2">Rate/Sec</th>
                    <th>Sum</th>
                    <th colspan="2">Per Query Stats</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Query Count</td>
                    <td class="no-right-border" align="right">{{ data.queryCount.perSec }} (per sec)</td>
                    <td style="width: 12%" class="no-left-border">
                        <div class="scaling-svg-container">
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="query_count"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.queryCount.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.queryCount.sumPercent }} of total</span>
                        </small>
                    </td>
                    <td colspan="2"></td>
                </tr>
                <tr>
                    <td>Query Time</td>
                    <td class="no-right-border" align="right">{{ data.queryTime.sumLoad }} load <span ng-if="!$root.isServerSummary">({{ data.queryTime.percentOfTotal }})</span></td>
                    <td class="no-left-border" widht="150px">
                        <div class="scaling-svg-container">
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="Query_time_avg"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.queryTime.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.queryTime.percentOfTotal }} of total</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ data.queryTime.avg }}&nbsp;avg
                    </td>
                    <td  style="width: 10%"
                         class="no-left-border"
                         ng-mouseover="popoverData = metrics.Query_time; measurement = 'time'"
                         popover-trigger="mouseenter"
                         popover-append-to-body="true"
                         popover-placement="top"
                         popover-template="'latencyPopover.html'" >
                         <div class="scaling-svg-container">
                             <latency-chart chart-data="metrics.Query_time"></latency-chart>
                         </div>
                    </td>
                </tr>
                <tr ng-if="data.lockTime.show">
                    <td>Lock Time</td>
                    <td class="no-right-border" align="right">{{ data.lockTime.avgLoad }} (avg load)</td>
                    <td class="no-left-border">
                        <div class="scaling-svg-container">
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="Lock_time_avg"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.lockTime.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.lockTime.percentOfTotal }} of total</span>
                            <span class="text-success">{{ data.lockTime.percentOfQueryTime }} of query time</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ data.lockTime.avg }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.Lock_time; measurement = 'time'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.Lock_time"></latency-chart>
                        </div>
                    </td>
                </tr>
                <tr ng-if="data.innodbRowLockWait.show">
                    <td>Innodb Row Lock Wait</td>
                    <td class="no-right-border" align="right">{{ data.innodbRowLockWait.avg }} (avg load)</td>
                    <td class="no-left-border">
                        <div class="scaling-svg-container">
                            <! -- TODO: investigate this metric -->
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="InnoDB_IO_r_wait_avg"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.innodbRowLockWait.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.innodbRowLockWait.percentOfTotal }} of total</span>
                            <span class="text-success">{{ data.innodbRowLockWait.percentOfQueryTime }} of query time</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ metrics.InnoDB_rec_lock_wait.Avg | humanize }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.InnoDB_rec_lock_wait; measurement = 'time'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.InnoDB_rec_lock_wait"></latency-chart>
                        </div>
                    </td>
                </tr>
                <tr ng-if="data.innodbIOReadWait.show">
                    <td>Innodb IO Read Wait</td>
                    <td class="no-right-border" align="right">{{ data.innodbIOReadWait.avg }} (avg load)</td>
                    <td class="no-left-border">
                        <div class="scaling-svg-container">
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="InnoDB_IO_r_wait_avg"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.innodbIOReadWait.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.innodbIOReadWait.percentOfTotal }} of total</span>
                            <span class="text-success">{{ data.innodbIOReadWait.percentOfQueryTime }} of query time</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ metrics.InnoDB_IO_r_wait.Avg | humanize : 'time' }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.InnoDB_IO_r_wait; measurement = 'time'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.InnoDB_IO_r_wait"></latency-chart>
                        </div>
                    </td>
                </tr>
                <tr ng-if="data.innodbQueueWait.show">
                    <td>Innodb Queue Wait</td>
                    <td class="no-right-border" align="right">{{ data.innodbQueueWait.avg }} (avg load)</td>
                    <td class="no-left-border">
                        <! -- TODO: investigate this metric -->
                        <div class="scaling-svg-container">
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="InnoDB_IO_r_wait_sum"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.innodbQueueWait.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.innodbQueueWait.percentOfTotal }} of total</span>
                            <span class="text-success">{{ data.innodbQueueWait.percentOfQueryTime }} of query time</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ metrics.InnoDB_queue_wait.Avg | humanize : 'time' }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.InnoDB_queue_wait; measurement = 'time'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.InnoDB_queue_wait"></latency-chart>
                        </div>
                    </td>
                </tr>
                <tr ng-if="data.innodbReadOps.show">
                    <td>Innodb Read Ops</td>
                    <td class="no-right-border" align="right">{{ data.innodbReadOps.perSec }} (per sec)</td>
                    <td class="no-left-border">
                        <div class="scaling-svg-container">
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="InnoDB_IO_r_ops_avg"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.innodbReadOps.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.innodbReadOps.percentOfTotal }} of total</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ metrics.InnoDB_IO_r_ops.Avg | humanize : 'number' }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.InnoDB_IO_r_ops; measurement = 'number'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.InnoDB_IO_r_ops"></latency-chart>
                        </div>
                    </td>
                </tr>
                <tr ng-if="data.innodbReadBytes.show">
                    <td>Innodb Read Bytes</td>
                    <td class="no-right-border" align="right">{{ data.innodbReadBytes.perSec }} (per sec)</td>
                    <td class="no-left-border">
                        <div class="scaling-svg-container">
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="InnoDB_IO_r_bytes_avg"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.innodbReadBytes.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.innodbReadBytes.percentOfTotal }} of total</span>
                            <span class="text-success">{{ data.innodbReadBytes.avgio }} avg io size</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ metrics.InnoDB_IO_r_bytes.Avg | humanize : 'size' }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.InnoDB_IO_r_bytes; measurement = 'size'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.InnoDB_IO_r_bytes"></latency-chart>
                        </div>
                    </td>
                </tr>
                <tr ng-if="data.innodbDistinctPages.show">
                    <td>Innodb Distinct Pages</td>
                    <td colspan="2" align="right">-</td>
                    <td><span class="sum">-</span></td>
                    <td class="text-right no-right-border">
                        {{ metrics.InnoDB_pages_distinct.Avg | humanize : 'number' }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.InnoDB_pages_distinct; measurement = 'number' "
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.InnoDB_pages_distinct"></latency-chart>
                        </div>
                    </td>
                </tr>
                <tr ng-if="data.queryCacheHits.show">
                    <td>Query Cache Hits</td>
                    <td class="no-right-border" align="right">{{ data.queryCacheHits.perSec }} (per sec)</td>
                    <td class="no-left-border">
                        <div class="scaling-svg-container">
                            <! -- TODO: investigate this metric -->
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="query_count"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.queryCacheHits.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.queryCacheHits.percentOfTotal }} of total</span>
                            <span class="text-success">{{ data.queryCacheHits.percentRation }} QC hit ratio</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ metrics.QC_Hit.Avg | humanize : 'number' }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.QC_Hit; measurement = 'number'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.QC_Hit"></latency-chart>
                        </div>
                    </td>
                </tr>
                <tr ng-if="data.rowsSent.show">
                    <td>Rows Sent</td>
                    <td class="no-right-border" align="right">{{ data.rowsSent.perSec }} (per sec)</td>
                    <td class="no-left-border">
                        <div class="scaling-svg-container">
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="Rows_sent_avg"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.rowsSent.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.rowsSent.percentOfTotal }} of total</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ metrics.Rows_sent.Avg | humanize : 'number' }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.Rows_sent; measurement = 'number'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.Rows_sent"></latency-chart>
                        </div>
                    </td>
                </tr>
                <tr ng-if="data.bytesSent.show">
                    <td>Bytes Sent</td>
                    <td class="no-right-border" align="right">{{ data.bytesSent.perSec }} (per sec)</td>
                    <td class="no-left-border">
                        <div class="scaling-svg-container">
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="Bytes_sent_avg"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.bytesSent.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.bytesSent.percentOfTotal }} of total</span>
                            <span class="text-success" ng-if="data.bytesSent.perRow !== '0.00'">{{ data.bytesSent.perRow }} bytes/row</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ metrics.Bytes_sent.Avg | humanize : 'size' }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.Bytes_sent; measurement = 'size'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.Bytes_sent"></latency-chart>
                        </div>
                    </td>
                </tr>
                <tr ng-if="data.rowsExamined.show">
                    <td>Rows Examined</td>
                    <td class="no-right-border" align="right">{{ data.rowsExamined.perSec }} (per sec)</td>
                    <td class="no-left-border">
                        <div class="scaling-svg-container">
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="Rows_examined_avg"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.rowsExamined.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.rowsExamined.percentOfTotal }} of total</span>
                            <span class="text-success">{{ data.rowsExamined.perRow }} per row sent</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ metrics.Rows_examined.Avg | humanize : 'number' }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.Rows_examined; measurement = 'number'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.Rows_examined"></latency-chart>
                        </div>
                    </td>
                </tr>
                <tr ng-if="data.rowsAffected.show">
                    <td>Rows Affected</td>
                    <td class="no-right-border" align="right">{{ data.rowsAffected.perSec }} (per sec)</td>
                    <td class="no-left-border">
                        <div class="scaling-svg-container">
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="Rows_affected_avg"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.rowsAffected.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.rowsAffected.percentOfTotal }} of total</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ metrics.Rows_affected.Avg | humanize : 'number' }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.Rows_affected; measurement = 'number'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.Rows_affected"></latency-chart>
                        </div>
                    </td>
                </tr>
                <tr ng-if="data.externalSorts.show">
                    <td>External Sorts <small>(Filesort)</small></td>
                    <td class="no-right-border" align="right">{{ data.externalSorts.perSec }} (per sec)</td>
                    <td class="no-left-border">
                        <div class="scaling-svg-container">
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="Filesort_on_disk_sum"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.externalSorts.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.externalSorts.percentOfTotal }} of total</span>
                            <span class="text-success">{{ data.externalSorts.perQueries }} of queries</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ metrics.Filesort.Avg | humanize : 'number' }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.Filesort; measurement = 'number'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.Filesort"></latency-chart>
                        </div>
                    </td>
                </tr>
                <tr ng-if="data.externalSortsDisk.show">
                    <td>External Sorts of Disk <small>(Filesort on disk)</small></td>
                    <td class="no-right-border" align="right">{{ data.externalSortsDisk.perSec }} (per sec)</td>
                    <td class="no-left-border">
                        <div class="scaling-svg-container">
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="Filesort_on_disk_sum"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.externalSortsDisk.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.externalSortsDisk.percentOfTotal }} of total</span>
                            <span class="text-success">{{ data.externalSortsDisk.perQueries }} of queries</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ metrics.Filesort_on_disk.Avg | humanize : 'number' }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.Filesort_on_disk; measurement = 'number'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.Filesort_on_disk"></latency-chart>
                        </div>
                    </td>
                </tr>
                <tr ng-if="data.externalSortPasses.show">
                    <td>External Sort Passes <small>(Merge Passes)</small></td>
                    <td class="no-right-border" align="right">{{ data.externalSortPasses.perSec }} (per sec)</td>
                    <td class="no-left-border">
                        <div class="scaling-svg-container">
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="Merge_passes_avg"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.externalSortPasses.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.externalSortPasses.percentOfTotal }} of total</span>
                            <span class="text-success">{{ data.externalSortPasses.perExternalSort }} per external sort</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ metrics.Merge_passes.Avg | humanize : 'number' }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.Merge_passes; measurement = 'number'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.Merge_passes"></latency-chart>
                        </div>
                    </td>
                </tr>
                <tr ng-if="data.cartesianProducts.show">
                    <td>Cartesian Products <small>(Full Joins)</small></td>
                    <td class="no-right-border" align="right">{{ data.cartesianProducts.perSec }} (per sec)</td>
                    <td class="no-left-border">
                        <div class="scaling-svg-container">
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="Select_full_range_join_sum"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.cartesianProducts.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.cartesianProducts.percentOfTotal }} of total</span>
                            <span class="text-success">{{ data.cartesianProducts.perQueries }} of queries</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ metrics.Full_join.Avg | humanize : 'number' }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.Full_join; measurement = 'number'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.Full_join"></latency-chart>
                        </div>
                    </td>
                </tr>
                <tr ng-if="data.fullTableScans.show">
                    <td>Full Table Scans</td>
                    <td class="no-right-border" align="right">{{ data.fullTableScans.perSec }} (per sec)</td>
                    <td class="no-left-border">
                        <div class="scaling-svg-container">
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="Sort_scan_sum"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.fullTableScans.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.fullTableScans.percentOfTotal }} of total</span>
                            <span class="text-success">{{ data.fullTableScans.perQueries }} of queries</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ metrics.Full_scan.Avg | humanize : 'number' }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.Full_scan; measurement = 'number'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.Full_scan"></latency-chart>
                        </div>
                    </td>
                </tr>
                <tr ng-if="data.queriesRequiringTmpTableInMemory.show">
                    <td>Queries Requiring Tmp Table In Memory</td>
                    <td class="no-right-border" align="right">{{ data.queriesRequiringTmpTableInMemory.perSec }} (per sec)</td>
                    <td class="no-left-border">
                            <! -- TODO: investigate this metric -->
                        <div class="scaling-svg-container">
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="Tmp_tables_avg"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.queriesRequiringTmpTableInMemory.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.queriesRequiringTmpTableInMemory.percentOfTotal }} of total</span>
                            <span class="text-success">{{ data.queriesRequiringTmpTableInMemory.perQueries }} of queries</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ metrics.Tmp_table.Avg | humanize : 'number' }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.Tmp_table; measurement = 'number'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.Tmp_table"></latency-chart>
                        </div>
                    </td>
                </tr>
                <tr ng-if="data.numberTmpTableMemory.show">
                    <td>Number of Tmp table in Memory</td>
                    <td class="no-right-border" align="right">{{ data.numberTmpTableMemory.perSec }} (per sec)</td>
                    <td class="no-left-border">
                        <div class="scaling-svg-container">
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="Tmp_tables_avg"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.numberTmpTableMemory.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.numberTmpTableMemory.percentOfTotal }} of total</span>
                            <span class="text-success">{{ data.numberTmpTableMemory.perQueryWithTmpTable }} per query with tmp table</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ metrics.Tmp_tables.Avg | humanize : 'number' }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.Tmp_tables; measurement = 'number'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.Tmp_tables"></latency-chart>
                        </div>
                    </td>
                </tr>
                <tr ng-if="data.queriesRequiringTmpTableonDisk.show">
                    <td>Queries Requiring Tmp Table on Disk</td>
                    <td class="no-right-border" align="right">{{ data.queriesRequiringTmpTableonDisk.perSec }} (per sec)</td>
                    <td class="no-left-border">
                        <div class="scaling-svg-container">
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="Tmp_disk_tables_avg"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.queriesRequiringTmpTableonDisk.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.queriesRequiringTmpTableonDisk.percentOfTotal }} of total</span>
                            <span class="text-success">{{ data.queriesRequiringTmpTableInMemory.perQueries }} of queries</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ metrics.Tmp_table_on_disk.Avg | humanize : 'number' }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.Tmp_table_on_disk; measurement = 'number'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.Tmp_table_on_disk"></latency-chart>
                        </div>
                    </td>
                </tr>
                <tr ng-if="data.numberTmpTablesDisk.show">
                    <td>Number of Tmp Tables on Disk</td>
                    <td class="no-right-border" align="right">{{ data.numberTmpTablesDisk.perSec }} (per sec)</td>
                    <td class="no-left-border">
                        <div class="scaling-svg-container">
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="Tmp_disk_tables_avg"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.numberTmpTablesDisk.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.numberTmpTablesDisk.percentOfTotal }} of total</span>
                            <span class="text-success">{{ data.numberTmpTablesDisk.perQueryWithTmpTable }} per query with disk tmp table</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ metrics.Tmp_disk_tables.Avg | humanize : 'number' }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.Tmp_disk_tables; measurement = 'number'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.Tmp_disk_tables"></latency-chart>
                        </div>
                    </td>
                </tr>
                <tr ng-if="data.totalSizeTmpTables.show">
                    <td>Total Size of Tmp Tables</td>
                    <td class="no-right-border" align="right">{{ data.totalSizeTmpTables.perSec }} (per sec)</td>
                    <td class="no-left-border">
                        <div class="scaling-svg-container">
                            <load-sparklines
                             popover-trigger="mouseenter"
                             popover-append-to-body="true"
                             popover-placement="top"
                             popover-template="'sparklinePopover.html'"
                             xkey="ts"
                             ykey="Tmp_table_sizes_avg"
                             chart-data="sparks"></load-sparklines>
                        </div>
                    </td>
                    <td>
                        <span class="sum">{{ data.totalSizeTmpTables.sum }}</span>
                        <small>
                            <span ng-if="!$root.isServerSummary" class="text-primary">{{ data.totalSizeTmpTables.percentOfTotal }} of total</span>
                            <span class="text-success">{{ data.totalSizeTmpTables.perQuery }} per query</span>
                        </small>
                    </td>
                    <td class="text-right no-right-border">
                        {{ metrics.Tmp_table_sizes.Avg | humanize : 'size' }}&nbsp;avg
                    </td>
                    <td style="width: 10%"
                        class="no-left-border"
                        ng-mouseover="popoverData = metrics.Tmp_table_sizes; measurement = 'size'"
                        popover-trigger="mouseenter"
                        popover-append-to-body="true"
                        popover-placement="top"
                        popover-template="'latencyPopover.html'" >
                        <div class="scaling-svg-container">
                            <latency-chart chart-data="metrics.Tmp_table_sizes"></latency-chart>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<script type="text/ng-template" id="latencyPopover.html">
<ul class="latency-popup">
    <li class="li-min">Min: {{ popoverData.Min | humanize : measurement }}</li>
    <li class="li-med">Med: {{ popoverData.Med | humanize : measurement }}</li>
    <li class="li-avg">Avg: {{ popoverData.Avg | humanize : measurement }}</li>
    <li class="li-p95">P95: {{ popoverData.P95 | humanize : measurement }}</li>
    <li class="li-max">Max: {{ popoverData.Max | humanize : measurement }}</li>
</ul>
</script>
